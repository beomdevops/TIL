# HTTP란??

HTTP는 W3 상에서 정보를 주고받을 수 있는 프로토콜이다(클라이언트와 서버 사이에 이루어지는 요청/응답 프로토콜). 주로 HTML 문서를 주고받는 데에 쓰인다. 주로 TCP를 사용하고 HTTP/3 부터는 UDP를 사용한다.

동작방식

  클라이언트가 요청을 생성하기 위한 연결을 연 다음 응답을 받을 때까지 대기하는 전통적인 클라이언트-서버 모델


HTTP는 무상태(Stateless) 프로토콜이며, 이는 서버가 두 요청 간에 어떠한 상태나 데이터를 유지하지 않음을 의미한다. (상태를 유지하기 위한 노력으로 Cookie와 Session을 사용)
한번 요청을 보내고 응답을 받으면 서버와 연결을 끊는다. 하나의 클라이언트가 서버와 여러번의 요청과 응답을 받더라도 서버는 이전의 요청에 대한 정보를 가지고 있지 않다. (서버가 클라이언트의 정보를 가지고 있는 것이 Stateful)



```프로토콜은 통신규약이다!```

ex)

  클라이언트인 웹 브라우저가 HTTP를 통하여 서버로부터 웹페이지(HTML)나 그림 정보를 요청하면, 서버는 이 요청에 응답하여 필요한 정보를 해당 사용자에게 전달하게 된다. 이 정보가 모니터와 같은 출력 장치를 통해 사용자에게 나타나는 것이다.
  
이때 요청하는 주소 맨 앞에 http:// 가 들어가는데 이는 http 프로토콜을 사용해서 정보를 교환하겠다는 표시이다.


## HTTP 메소드

    GET: 클라이언트가 서버에게 URL에 해당하는 자료의 전송을 요청한다.(리소스를 조회할 때 사용)
    HEAD: GET 요청으로 반환될 데이터 중 헤더 부분에 해당하는 데이터만 요청한다.
    POST: 요청 메시지 바디부분에 데이터를 담아서 서버에 요청 -> 서버는 데이터 처리, 주로 데이터 등록에 사용하며 멱등성을 보장하지 않는다.
    PATCH: 리소스를 일부만 변경.
    PUT: 리소스를 대체, 해당 리소스가 없으면 생성
    DELETE: 리소스 삭제
    TRACE: 클라이언트가 서버에게 송신한 요청의 내용을 반환해 줄 것을 요청한다.
    CONNECT: 클라이언트가 특정 종류의 프록시 서버에게 연결을 요청한다.
    OPTIONS: 대상 리소스에 대한 통신 가능 옵션을 설명(주로 CORS에서 사용)
    
## HTTP 메소드의 속성

### 안전 (Safe)

요청 리소스가 변하지 않는속성이다. 즉 계속해서 http 메소드를 호출해도 리소스가 변하지 않는다.

http 메소드중에 ```GET```이 대표적으로 안전한 속성을 가지고 있다.

### 멱등 (Idempotent)

멱등이란 여러번 수행해도 결과가 같음을 의미한다

대표적인 HTTP 메소드는 GET, PUT, DELETE 등이 있다.

    GET - 한번 조회하나 여러번 조회하나 같은 결과가 조회
    PUT - 데이터가 없다면 생성되고 있다면 우리가 요청한 그 값으로 수정된 결과 반영(완전 교체 해버린다.)
    DELETE - 같은 요청을 여러번 해도 삭제된 결과는 같다.

POST나 PATCH는 멱등하다고 볼 수 없다.

PATCH 메소드의 경우 구현 방법에 따라서 PUT 메소드처럼 멱등성이 보장될 수도 있고, 혹은 보장되지 않을 수도 있다.

POST 메소드의 경우 리소스를 새롭게 생성하는 행위이기 때문에 여러번 수행하게 되면 매번 새로운 리소스가 생성된 것이고, 연산을 수행한 결과가 매번 달라진다.

### 캐시가능성 (Cachable)

응답 결과 리소스를 저장할 수 있음을 나타낸다.

캐시 가능 HTTP 메서드는

- GET, HEAD, POST, PATCH 가 있으며 POST, PATCH는 잘 사용하지 않는다.

### PUT과 PATCH 차이점

    User{
      id;
      name;
      email;
    }

id, 나이, 이름을 가지는 user가 있으며 현재 id=1, name = park, email = test@test.com인 유저 1명이 있다고 가정하자

    PUT /users/1
    {
        "email": test2@test2.com 
    }

위의 PUT 메소드 통해 email 를 변경할 시

   
   {
      "name": null,
      "email": test2@test2.com 
   }

name이 null로 변경된다. 즉 보내지지 않은 정보에 대해서 null값으로 업데이트한다... 

PATCH 의 경우

    
    PATCH /users/1
    {
        "email": test2@test2.com 
    }
    

위의 PATCH 메소드를 통해 email 를 변경할 시

   {
      "name": park,
      "email": test2@test2.com 
   }


기존 데이터를 유지하고 변경을 요청한 email만 변경된다.

즉 전체를 변경하고 싶을 경우 PUT, 리소스를 일부만 변경하고 싶다면 PATCH 메소드를 이용하는 것이 적절하다!

